Python: 3.13.11 (main, Dec  8 2025, 23:38:56) [GCC 12.2.0]
pip 25.3 from /usr/local/lib/python3.13/site-packages/pip (python 3.13)
============================= test session starts ==============================
platform linux -- Python 3.13.11, pytest-8.4.1, pluggy-1.6.0
rootdir: /tests
plugins: json-ctrf-0.3.5
collected 9 items

../tests/test_outputs.py FFF..FF..                                       [100%]

=================================== FAILURES ===================================
_______________________ test_basic_numbers_and_comments ________________________

    def test_basic_numbers_and_comments() -> None:
        p = write_text(
            Path("/tmp/input.txt"),
            """
            # comment line
            1
              2   # inline comment
            -3
            not_a_number
            4#not_inline_comment (invalid token, ignored in non-strict)
            """.lstrip(),
        )
        code, out, err = run_sum_cli(p)
        assert code == 0, err
>       assert out == "SUM=0\n"
E       AssertionError: assert 'SUM=4\n' == 'SUM=0\n'
E         
E         - SUM=0
E         ?     ^
E         + SUM=4
E         ?     ^

/tests/test_outputs.py:43: AssertionError
__________________ test_strict_mode_rejects_invalid_data_line __________________

    def test_strict_mode_rejects_invalid_data_line() -> None:
        p = write_text(Path("/tmp/strict.txt"), "1\n2\n4#bad\n")
        code, out, err = run_sum_cli(p, strict=True)
>       assert code == 2
E       assert 0 == 2

/tests/test_outputs.py:49: AssertionError
__________________________ test_utf8_bom_is_accepted ___________________________

    def test_utf8_bom_is_accepted() -> None:
        # BOM at start of file should not break parsing.
        p = Path("/tmp/bom.txt")
        p.write_bytes(("\ufeff1\n2\n").encode("utf-8"))
        code, out, err = run_sum_cli(p)
        assert code == 0, err
>       assert out == "SUM=3\n"
E       AssertionError: assert 'SUM=2\n' == 'SUM=3\n'
E         
E         - SUM=3
E         ?     ^
E         + SUM=2
E         ?     ^

/tests/test_outputs.py:61: AssertionError
___________________ test_range_directive_large_and_reversed ____________________

    def test_range_directive_large_and_reversed() -> None:
        # 1..100000000 => n(n+1)/2 = 5_000_000_050_000_000
        p = write_text(
            Path("/tmp/range.txt"),
            "@range 1..100000000\n@range 5..3\n",
        )
        code, out, err = run_sum_cli(p)
        assert code == 0, err
>       assert out == "SUM=5000000050000012\n"  # 5_000_000_050_000_000 + 12
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AssertionError: assert 'SUM=4999999950000007\n' == 'SUM=5000000050000012\n'
E         
E         - SUM=5000000050000012
E         + SUM=4999999950000007

/tests/test_outputs.py:86: AssertionError
___________________ test_include_relative_to_including_file ____________________

    def test_include_relative_to_including_file() -> None:
        root = Path("/tmp/include")
        main = write_text(
            root / "main.txt",
            "@include sub/nums.txt\n@range 1..3\n",
        )
        write_text(root / "sub" / "nums.txt", "@base 16\n0a\n")
    
        code, out, err = run_sum_cli(main)
>       assert code == 0, err
E       AssertionError: Error: [Errno 2] No such file or directory: 'sub/nums.txt'
E         
E       assert 1 == 0

/tests/test_outputs.py:98: AssertionError
==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED ../tests/test_outputs.py::test_separators_and_plus_sign
PASSED ../tests/test_outputs.py::test_base_directive_switching
PASSED ../tests/test_outputs.py::test_missing_input_file_is_graceful
PASSED ../tests/test_outputs.py::test_include_cycle_is_detected
FAILED ../tests/test_outputs.py::test_basic_numbers_and_comments - AssertionE...
FAILED ../tests/test_outputs.py::test_strict_mode_rejects_invalid_data_line
FAILED ../tests/test_outputs.py::test_utf8_bom_is_accepted - AssertionError: ...
FAILED ../tests/test_outputs.py::test_range_directive_large_and_reversed - As...
FAILED ../tests/test_outputs.py::test_include_relative_to_including_file - As...
========================= 5 failed, 4 passed in 3.50s ==========================
PYTEST_EXIT=1
Wrote reward=0
Python: 3.13.11 (main, Dec  8 2025, 23:38:56) [GCC 12.2.0]
pip 25.3 from /usr/local/lib/python3.13/site-packages/pip (python 3.13)
============================= test session starts ==============================
platform linux -- Python 3.13.11, pytest-8.4.1, pluggy-1.6.0
rootdir: /
plugins: json-ctrf-0.3.5
collected 9 items

../tests/test_outputs.py .........                                       [100%]

==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED ../tests/test_outputs.py::test_basic_numbers_and_comments
PASSED ../tests/test_outputs.py::test_strict_mode_rejects_invalid_data_line
PASSED ../tests/test_outputs.py::test_utf8_bom_is_accepted
PASSED ../tests/test_outputs.py::test_separators_and_plus_sign
PASSED ../tests/test_outputs.py::test_base_directive_switching
PASSED ../tests/test_outputs.py::test_range_directive_large_and_reversed
PASSED ../tests/test_outputs.py::test_include_relative_to_including_file
PASSED ../tests/test_outputs.py::test_missing_input_file_is_graceful
PASSED ../tests/test_outputs.py::test_include_cycle_is_detected
============================== 9 passed in 0.60s ===============================
PYTEST_EXIT=0
Wrote reward=1
Python: 3.13.11 (main, Dec  8 2025, 23:38:56) [GCC 12.2.0]
pip 25.3 from /usr/local/lib/python3.13/site-packages/pip (python 3.13)
============================= test session starts ==============================
platform linux -- Python 3.13.11, pytest-8.4.1, pluggy-1.6.0
rootdir: /
plugins: json-ctrf-0.3.5
collected 14 items

../tests/test_outputs.py ..............                                  [100%]

==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED ../tests/test_outputs.py::test_basic_numbers_and_comments
PASSED ../tests/test_outputs.py::test_strict_mode_rejects_invalid_data_line
PASSED ../tests/test_outputs.py::test_utf8_bom_is_accepted
PASSED ../tests/test_outputs.py::test_separators_and_plus_sign
PASSED ../tests/test_outputs.py::test_base_directive_switching
PASSED ../tests/test_outputs.py::test_cli_base_overrides_default_parsing_base
PASSED ../tests/test_outputs.py::test_cli_base_validation_requires_2_to_36
PASSED ../tests/test_outputs.py::test_range_directive_large_and_reversed
PASSED ../tests/test_outputs.py::test_directives_malformed_or_unknown_are_errors
PASSED ../tests/test_outputs.py::test_include_relative_to_including_file
PASSED ../tests/test_outputs.py::test_missing_input_file_is_graceful
PASSED ../tests/test_outputs.py::test_missing_include_file_is_graceful
PASSED ../tests/test_outputs.py::test_include_cycle_is_detected
PASSED ../tests/test_outputs.py::test_usage_error_missing_positional_input_file
============================== 14 passed in 1.15s ==============================
PYTEST_EXIT=0
Wrote reward=1
